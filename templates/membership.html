<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membership Required - Botanical Bliss</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h1>🌿 Botanical Bliss 🌿</h1>
        <nav>
            <a href="/">Home</a>
            {% if is_authenticated %}
                <a href="/menu">Shop Plants</a>
                <a href="/cart">Cart</a>
                <a href="/membership" class="active">Membership</a>
                <span class="user-greeting">Hello, {{ email }}</span>
                <form action="/logout" method="POST" class="logout-form">
                    <button type="submit" class="logout-button">Logout</button>
                </form>
            {% else %}
                <a href="/login">Login</a>
                <a href="/signup">Sign Up</a>
            {% endif %}
        </nav>
    </header>

    <main>
        <div class="membership-container">
            <h2>🌱 Join Our Exclusive Plant Family 🌱</h2>
            
            <div class="membership-hero">
                <p class="membership-intro">
                    Welcome to Botanical Bliss! Our curated collection of rare and beautiful houseplants 
                    is exclusively available to our members. Join our plant-loving community for just 
                    <strong>${{ membership_price }}</strong> per year.
                </p>
            </div>

            <div class="membership-benefits">
                <h3>✨ Membership Benefits</h3>
                <ul>
                    <li>🌿 Access to our exclusive collection of rare plants</li>
                    <li>🚚 Priority shipping and handling</li>
                    <li>💚 Expert plant care guidance and support</li>
                    <li>🎁 Monthly surprise plant accessories</li>
                    <li>📱 Mobile app with plant care reminders</li>
                    <li>🌟 Early access to new arrivals and limited editions</li>
                    <li>💬 Access to our exclusive plant community forum</li>
                    <li>📚 Digital library of plant care guides</li>
                </ul>
            </div>

            <div class="membership-form-container">
                <h3>Complete Your Membership</h3>
                <p class="form-note">Please provide additional information to complete your membership application.</p>
                
                <form action="/purchase-membership" method="POST" class="membership-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="email">Email (confirmed)</label>
                        <input type="email" id="email" name="email" value="{{ email }}" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone_number">Phone Number</label>
                        <input type="tel" id="phone_number" name="phone_number" placeholder="+1-555-123-4567" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthday">Birthday</label>
                        <input type="date" id="birthday" name="birthday" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="id_photo">Upload Photo ID</label>
                        <input type="file" id="id_photo" name="id_photo" accept="image/*" required>
                        <small>Please upload a clear photo of your government-issued ID for verification.</small>
                    </div>
                    
                    <div class="payment-section">
                        <h4>💳 Payment Information</h4>
                        <div class="price-display">
                            <span class="price-label">Annual Membership Fee:</span>
                            <span class="price-amount">${{ membership_price }}</span>
                        </div>
                        
                        <div class="payment-options">
                            <h5>Choose Your Payment Method:</h5>
                            
                            <div class="payment-option">
                                <input type="radio" id="zenobia-pay" name="payment_method" value="zenobia" checked>
                                <label for="zenobia-pay" class="payment-label">
                                    <img src="https://zenobiapay.com/zenobia-pay.png" alt="Zenobia Pay" class="payment-logo">
                                    <span class="payment-text">Pay with Zenobia Pay (Recommended)</span>
                                    <span class="payment-benefit">Save 2% with bank transfer</span>
                                </label>
                            </div>
                            
                            <div class="payment-option">
                                <input type="radio" id="bank-transfer" name="payment_method" value="bank">
                                <label for="bank-transfer" class="payment-label">
                                    <span class="payment-icon">🏦</span>
                                    <span class="payment-text">Direct Bank Transfer</span>
                                    <span class="payment-benefit">Secure & Eco-friendly</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="terms-section">
                        <label class="checkbox-label">
                            <input type="checkbox" required>
                            <span>I agree to the <a href="/terms" target="_blank">Terms of Service</a> and <a href="/privacy" target="_blank">Privacy Policy</a></span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" required>
                            <span>I certify that I am at least 18 years old</span>
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox">
                            <span>Send me plant care tips and exclusive offers</span>
                        </label>
                    </div>
                    
                    <button type="submit" class="cta-button membership-button">
                        🌱 Complete Membership - ${{ membership_price }}
                    </button>
                </form>
            </div>

            <div class="testimonials">
                <h3>💚 What Our Members Say</h3>
                <div class="testimonial-grid">
                    <blockquote>
                        "The most amazing collection of plants I've ever seen! My home has never looked better."
                        <footer>- Sarah K., Plant Enthusiast</footer>
                    </blockquote>
                    
                    <blockquote>
                        "The expert care guidance helped me keep my Fiddle Leaf Fig thriving for over a year!"
                        <footer>- Michael R., New Plant Parent</footer>
                    </blockquote>
                    
                    <blockquote>
                        "Love the monthly surprises and the community forum. It's like having plant friends everywhere!"
                        <footer>- Elena M., Botanical Collector</footer>
                    </blockquote>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Botanical Bliss. Growing together, naturally.</p>
    </footer>

    <script>
        // Handle file upload preview
        document.getElementById('id_photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // Store base64 data for form submission
                    const base64 = e.target.result.split(',')[1];
                    let hiddenInput = document.getElementById('id_photo_data');
                    if (!hiddenInput) {
                        hiddenInput = document.createElement('input');
                        hiddenInput.type = 'hidden';
                        hiddenInput.name = 'id_photo';
                        hiddenInput.id = 'id_photo_data';
                        document.querySelector('.membership-form').appendChild(hiddenInput);
                    }
                    hiddenInput.value = base64;
                };
                reader.readAsDataURL(file);
            }
        });

        // Payment method selection
        document.querySelectorAll('input[name="payment_method"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.payment-option').forEach(option => {
                    option.classList.remove('selected');
                });
                this.closest('.payment-option').classList.add('selected');
            });
        });

        // Initialize first option as selected
        document.querySelector('.payment-option').classList.add('selected');
    </script>

    <style>
        .membership-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .membership-hero {
            background: var(--gradient-1);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .membership-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 20%, transparent 20%);
            background-size: 30px 30px;
        }

        .membership-intro {
            font-size: 1.3rem;
            line-height: 1.6;
            margin: 0;
            position: relative;
            z-index: 2;
        }

        .membership-benefits {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
        }

        .membership-benefits ul {
            list-style: none;
            padding: 0;
        }

        .membership-benefits li {
            padding: 10px 0;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(74, 124, 89, 0.1);
        }

        .membership-benefits li:last-child {
            border-bottom: none;
        }

        .membership-form-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
        }

        .form-note {
            color: var(--dark-color);
            font-style: italic;
            margin-bottom: 25px;
        }

        .payment-section {
            background: var(--light-color);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .price-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--accent-color);
        }

        .price-label {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .price-amount {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color);
        }

        .payment-options {
            margin-top: 20px;
        }

        .payment-option {
            display: flex;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #eee;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option:hover,
        .payment-option.selected {
            border-color: var(--primary-color);
            background: rgba(74, 124, 89, 0.05);
        }

        .payment-option input[type="radio"] {
            margin-right: 15px;
        }

        .payment-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            flex: 1;
        }

        .payment-logo {
            height: 30px;
            margin-right: 15px;
        }

        .payment-icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .payment-text {
            font-weight: 600;
            margin-right: 10px;
        }

        .payment-benefit {
            font-size: 0.9rem;
            color: var(--secondary-color);
            font-style: italic;
        }

        .terms-section {
            margin: 25px 0;
            padding: 20px;
            background: rgba(74, 124, 89, 0.05);
            border-radius: 10px;
        }

        .checkbox-label {
            display: flex !important;
            align-items: flex-start;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .checkbox-label input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 2px;
        }

        .membership-button {
            width: 100%;
            font-size: 1.3rem;
            padding: 20px;
            background: var(--gradient-1);
            border: none;
            color: white;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .membership-button:hover {
            background: var(--gradient-2);
            transform: translateY(-2px);
        }

        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .testimonials blockquote {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border-left: 4px solid var(--accent-color);
            margin: 0;
        }

        .testimonials footer {
            margin-top: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        nav .active {
            background: var(--accent-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
        }

        @media (max-width: 768px) {
            .membership-container {
                padding: 10px;
            }
            
            .membership-hero, .membership-form-container {
                padding: 20px;
            }
            
            .price-display {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .payment-label {
                flex-direction: column;
                text-align: center;
            }
            
            .testimonial-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>
